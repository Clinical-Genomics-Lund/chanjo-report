{% extends 'report/layouts/base.html' %}

{% block main %}
<div class="container">
	<div class="page-header">
		<h1>Gene: {{ gene_id }}</h1>
	</div>

	{% for tx_id, tx_group in tx_groups %}
		<div class="row">
			<div class="col-md-12">
				<div class="panel panel-default">
					<div class="panel-heading">Transcript: {{ tx_id }}</div>
					<table class="table table-bordered">
						<thead>
							<tr>
								<th>Sample</th>
								<th>Mean coverage</th>
								{% for level, _ in levels %}
									<th>Completeness {{ level }}X</th>
								{% endfor %}
							</tr>
						</thead>
						<tbody>
							{% for transcript in tx_group %}
								<tr>
									<td>{{ id_map[transcript.sample_id]|default(transcript.sample_id) }}</td>
									<td>{{ transcript.mean_coverage|round(2) }}</td>
									{% for _, field_id in levels %}
										<td>
											{% if transcript|attr(field_id) is number %}
												{{ transcript|attr(field_id)|round(2) }}
											{% endif %}
										</td>
									{% endfor %}
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	{% endfor %}
</div>

{% endblock %}
